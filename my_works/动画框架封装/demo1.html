<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>demo1</title>
	<style type="text/css">
	*{
		padding: 0;
		margin: 0;
	}
	ul li{
		top: 0;
		list-style: none;
		width:98px;
		height: 98px;
		background: #ccc;
		position: relative;
		float: left;
		line-height: 100px;
		text-align: center;
		border: 1px #000 solid;
	}
	</style>
</head>
<body>
	<ul>
		<li>01</li>
		<li>02</li>
		<li>03</li>
		<li>04</li>
		<li>05</li>
		<li>06</li>
		<li>07</li>
		<li>08</li>
		<li>09</li>
		<li>10</li>
	</ul>
		<script type="text/javascript" src="animate.js"></script>
	<script type="text/javascript">
	var aLi =document.getElementsByTagName('li');
	document.onclick = function (){
		var flag = false;
		var timer = null;
		for( var i=0;i<aLi.length;i++) {
			function move(i,target) {
				flag = false;
				// 放在外边，flag一直是true,会不断的调用move(i,0),但是目标点和当前点一样，所以不懂，但是不停的调用；
				timer = setTimeout(function (){
					animate(aLi[i],{'top': target},function (){
						// 最后一个跑完，仍然会出现重复调用的情况，所以，开始的时候的目标点，需要写死；
					if(aLi[aLi.length - 1].offsetTop == 100) {
						flag = true;
					}
					if(flag) {
						for(var i=0;i<aLi.length;i++){
							move(i,0);
						}
					}
			});
				},i*100)
			}
			move(i,100)
		}
	}

	</script>
</body>
</html>
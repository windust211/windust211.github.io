<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>myAnimate</title>
	<style type="text/css">
	*{margin: 0px;padding: 0;}
	div{
		width: 100px;
		height: 100px;
		background: red;
		position: relative;
		opacity: 0.1;
	}
	</style>
</head>
<body>
<div>
	hello
</div>
<button>
	走起
</button>
<script type="text/javascript" src="animate.js"></script>
	<script type="text/javascript">
		var btn = document.getElementsByTagName('button')[0];
		var oDiv = document.getElementsByTagName('div')[0];
		var total = 2;
		btn.onclick  = function (){
		var times = 0
		round(times);
		}
		// 将一圈动画封装成一个函数，然后进行反复调用；
		// 动画函数的回调函数，形成了一个死递归；
		// 要终止调用，在回调里面添加条件，然后决定接着循环，还是停止动画；
		// 多少圈，可以由用户指定；
		function round (times){
			animate(oDiv,{'opacity' : 0.6},function (){
				animate(oDiv,{'left': 200},function (){
					animate(oDiv,{'top' : 200},function (){
						animate(oDiv,{'left':0}, function (){
							animate(oDiv,{'top':0}, function (){
								times++;
								if(times == total){
										alert('恭喜中奖')
								} else {
										round(times);
								}


							})
						})
					})
				});
			});
		}

	</script>
</body>
</html>